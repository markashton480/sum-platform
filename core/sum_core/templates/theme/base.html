{# sum_core fallback template for the v0.6 theme-owned rendering contract. #}
{% load static wagtailcore_tags branding_tags wagtailimages_tags analytics_tags seo_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% get_site_settings as site_settings %}
    {% wagtail_site as current_site %}
    {% analytics_head %}

    {% if page %}
      {% render_meta page %}
      {% render_og page %}
      {% render_schema page %}
    {% endif %}

    {% firstof site_settings.company_name current_site.site_name WAGTAIL_SITE_NAME as site_name %}
    {% if site_settings.favicon %}
      {% image site_settings.favicon fill-32x32 as favicon_rendition %}
      <link rel="icon" href="{{ favicon_rendition.url }}">
    {% endif %}

    {# Expose consent version for cookie_consent.js #}
    {% if site_settings.cookie_banner_enabled %}
      <meta name="sum:cookie-consent-version" content="{{ site_settings.cookie_consent_version }}">
    {% endif %}

    <!-- Branding Fonts -->
    {% branding_fonts %}

    <!-- Main CSS (fallback) -->
    <link rel="stylesheet" href="{% static 'sum_core/css/main.css' %}">

    <!-- Branding Variables (Must load AFTER main.css to override defaults) -->
    {% branding_css %}

    {% block extra_head %}{% endblock %}
  </head>
  <body id="body">
    {% analytics_body %}

    {% include "theme/includes/header.html" %}

    <main>
        {% block content %}{% endblock %}
    </main>

    {% include "sum_core/includes/cookie_banner.html" %}

    {% include "theme/includes/footer.html" %}

    <!-- Sticky CTA (Mobile) -->
    {% include "theme/includes/sticky_cta.html" %}

    <!-- Main JS -->
    <script src="{% static 'sum_core/js/cookie_consent.js' %}" defer></script>
    {% if site_settings.gtm_container_id or site_settings.ga_measurement_id %}
      <script src="{% static 'sum_core/js/analytics_loader.js' %}" defer></script>
    {% endif %}
    <script src="{% static 'sum_core/js/event_tracking.js' %}" defer></script>
    <script src="{% static 'sum_core/js/main.js' %}"></script>
    <script src="{% static 'sum_core/js/navigation.js' %}"></script>
    {% block extra_body %}{% endblock %}
  </body>
</html>
