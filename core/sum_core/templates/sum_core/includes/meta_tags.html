{# Minimal SEO + Open Graph meta tags. #}
{% load wagtailcore_tags wagtailimages_tags %}

{% if page %}
  {% firstof site_settings.company_name current_site.site_name WAGTAIL_SITE_NAME as site_name %}
  {% if page.meta_title %}
    <meta property="og:title" content="{{ page.meta_title|striptags }}">
  {% elif page.seo_title %}
    <meta property="og:title" content="{{ page.seo_title|striptags }}">
  {% else %}
    <meta property="og:title" content="{{ page.title|add:' | '|add:site_name|striptags }}">
  {% endif %}

  {% if page.meta_description %}
    <meta name="description" content="{{ page.meta_description|striptags }}">
    <meta property="og:description" content="{{ page.meta_description|striptags }}">
  {% endif %}

  {% firstof page.full_url page.url as canonical_url %}
  {% if canonical_url %}
    <link rel="canonical" href="{{ canonical_url }}">
    <meta property="og:url" content="{{ canonical_url }}">
  {% endif %}

  <meta property="og:type" content="website">

  {% if page.og_image %}
    {% image page.og_image fill-1200x630 as og_rendition %}
    <meta property="og:image" content="{{ og_rendition.url }}">
  {% elif page.featured_image %}
    {% image page.featured_image fill-1200x630 as og_rendition %}
    <meta property="og:image" content="{{ og_rendition.url }}">
  {% elif site_settings.og_default_image %}
    {% image site_settings.og_default_image fill-1200x630 as og_rendition %}
    <meta property="og:image" content="{{ og_rendition.url }}">
  {% endif %}
{% endif %}
