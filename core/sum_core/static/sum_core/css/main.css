/* ==========================================================================
   SolarCraft Premium - Design System 2.0 (Brand Agnostic)
   Based on V3 Final Design & Design System Spec
   ========================================================================== */

/* ===================================
   1. DESIGN TOKENS (HSL SYSTEM)
   =================================== */

:root {
  /* 
     Base HSL Values are injected by Wagtail via branding_tags.py:
     --brand-h, --brand-s, --brand-l
     
     If not present, fallback values are defined here.
  */
  --brand-h: 30; /* Brown/Gold Default */
  --brand-s: 40%;
  --brand-l: 35%;

  /* Derived Palette */
  --primary: var(--brand-h), var(--brand-s), var(--brand-l);
  --primary-deep: var(--brand-h), var(--brand-s), calc(var(--brand-l) - 15%);

  /* Surface & Text - Derived for harmony */
  --surface-tint: var(--brand-h), 10%, 97%;
  --surface-pure: 0, 0%, 100%;

  --text-main: var(--brand-h), 15%, 15%;
  --text-muted: var(--brand-h), 5%, 45%;

  /* Accent - Analogous calculation or custom injection */
  --accent-pop: calc(var(--brand-h) + 30), 60%, 55%;

  /* Typography - PRD Design Token System */
  /* Font Families - Populated from SiteSettings per client */
  --font-heading: "Fraunces", serif;
  --font-body: "Manrope", sans-serif;
  /* Distinct Display Font - defaults to Heading font unless overridden by theme injection */
  --font-display: var(--font-heading);

  /* Font Weights - PRD C.1.2 */
  --font-light: 300;
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;

  /* Line Heights - PRD C.1.2 */
  --leading-tight: 1.25;
  --leading-normal: 1.5;
  --leading-relaxed: 1.75;

  /* Font Size Scale - PRD C.1.2 */
  --text-xs: 0.75rem;      /* 12px */
  --text-sm: 0.875rem;     /* 14px */
  --text-base: 1rem;       /* 16px */
  --text-lg: 1.125rem;     /* 18px */
  --text-xl: 1.25rem;      /* 20px */
  --text-2xl: 1.5rem;      /* 24px */
  --text-3xl: 1.875rem;    /* 30px */
  --text-4xl: 2.25rem;     /* 36px */
  --text-5xl: 3rem;        /* 48px */
  --text-6xl: 3.75rem;     /* 60px */
  --text-display: clamp(3rem, 8vw, 5.5rem); /* Huge Editorial Headings */

  /* Spacing - PRD C.1.3 */
  --space-1: 0.25rem;   /* 4px */
  --space-2: 0.5rem;    /* 8px */
  --space-3: 0.75rem;   /* 12px */
  --space-4: 1rem;      /* 16px */
  --space-5: 1.25rem;   /* 20px */
  --space-6: 1.5rem;    /* 24px */
  --space-8: 2rem;      /* 32px */
  --space-10: 2.5rem;   /* 40px */
  --space-12: 3rem;     /* 48px */
  --space-16: 4rem;     /* 64px */
  --space-20: 5rem;     /* 80px */
  --space-24: 6rem;     /* 96px */
  
  /* Layout Spacing */
  --container-padding: clamp(var(--space-6), 5vw, var(--space-16));
  --section-gap: clamp(var(--space-16), 10vw, var(--space-24));

  /* Animation Easings */
  --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);

  /* Borders & Radius - PRD C.1.5 (extended) */
  --radius-sm: 0.25rem;   /* 4px */
  --radius-md: 0.375rem;  /* 6px */
  --radius-lg: 0.5rem;    /* 8px */
  --radius-xl: 0.75rem;   /* 12px */
  --radius-2xl: 1rem;     /* 16px */
  --radius-3xl: 1.5rem;   /* 24px */
  --radius-full: 9999px;  /* Pill shape */

  /* Shadows - PRD C.1.4 */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.15);
  --shadow-xl: 0 10px 25px rgba(0, 0, 0, 0.15);
}

/* Technical Theme Override */
[data-theme="technical"] {
  --brand-h: 210; /* Deep Blue */
  --brand-s: 80%;
  --brand-l: 25%;

  --surface-tint: 210, 20%, 98%;

  --accent-pop: 200, 90%, 40%;
  --font-heading: "Manrope", sans-serif; /* Cleaner look for technical */
}

/* ===================================
   2. RESET & CORE UTILITIES
   =================================== */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-body);
  color: hsla(var(--text-main), 1);
  background-color: hsla(var(--surface-tint), 1);
  line-height: 1.6;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}

h1,
h2,
h3,
h4,
h5 {
  font-family: var(--font-heading);
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  letter-spacing: -0.02em;
  color: hsla(var(--text-main), 1);
}

img {
  max-width: 100%;
  display: block;
}

a {
  text-decoration: none;
  color: inherit;
  transition: color 0.3s ease;
}

/* Utility: Text Emphasis */
.italic-accent {
  font-style: italic;
  font-weight: 300;
  color: hsla(var(--accent-pop), 1);
}

/* Utility: Container */
.container {
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 var(--container-padding);
}

.section {
  padding: var(--section-gap) 0;
}

/* ===================================
   3. ANIMATION UTILITIES (The "Wow" Factor)
   =================================== */

/* Text Reveal */
.reveal-text {
  opacity: 0;
  transform: translateY(30px);
  transition: all 1s var(--ease-out-expo);
}

.is-in-view .reveal-text,
.is-in-view.reveal-text {
  opacity: 1;
  transform: translateY(0);
}

/* Image Curtain Reveal */
.reveal-img-wrapper {
  position: relative;
  overflow: hidden;
  background-color: hsla(var(--primary), 0.1);
}

.reveal-img-wrapper img {
  transform: scale(1.15);
  transition: transform 1.5s var(--ease-out-expo);
  will-change: transform;
}

.reveal-img-wrapper::after {
  content: "";
  position: absolute;
  inset: 0;
  background-color: hsla(var(--surface-tint), 1); /* Matches bg */
  transform: scaleY(1);
  transform-origin: bottom;
  transition: transform 1.2s var(--ease-out-expo);
  z-index: 2;
}

.is-in-view .reveal-img-wrapper img,
.is-in-view.reveal-img-wrapper img {
  transform: scale(1);
}

.is-in-view .reveal-img-wrapper::after,
.is-in-view.reveal-img-wrapper::after {
  transform: scaleY(0);
}

/* Stagger Delays */
.delay-100 {
  transition-delay: 0.1s;
}
.delay-200 {
  transition-delay: 0.2s;
}
.delay-300 {
  transition-delay: 0.3s;
}

/* General Fade Group */
.reveal-group {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}

.is-in-view.reveal-group,
.is-in-view .reveal-group {
  opacity: 1;
  transform: translateY(0);
}

/* ===================================
   4. HEADER (Glassmorphism)
   =================================== */

.header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 100;
  padding: 1.5rem 0;
  transition: all 0.4s ease;
}

.header.scrolled {
  padding: 1rem 0;
  background: hsla(var(--surface-pure), 0.85);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid hsla(var(--text-main), 0.05);
}

.nav-inner {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  font-family: var(--font-heading);
  font-size: var(--text-2xl);
  font-weight: var(--font-semibold);
  color: hsla(var(--primary), 1);
}

.nav-links {
  display: none;
  gap: 2.5rem;
}

@media (min-width: 1024px) {
  .nav-links {
    display: flex;
    align-items: center;
  }
}

.nav-item {
  font-family: var(--font-body);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  position: relative;
}

.nav-item::after {
  content: "";
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 0;
  height: 1px;
  background: hsla(var(--accent-pop), 1);
  transition: width 0.3s ease;
}

.nav-item:hover::after {
  width: 100%;
}

/* Mobile Menu Button */
.menu-btn {
  display: flex;
  flex-direction: column;
  gap: 6px;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 110;
}

@media (min-width: 1024px) {
  .menu-btn {
    display: none;
  }
}

.menu-line {
  width: 24px;
  height: 2px;
  background-color: hsla(var(--text-main), 1);
  transition: 0.3s ease;
}

/* ===================================
   5. BUTTONS
   =================================== */

.btn {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  padding: var(--space-4, 1rem) var(--space-8, 2rem);
  border-radius: var(--radius-sm); /* Architectural feel = sharper corners */
  font-family: var(--font-body);
  font-weight: var(--font-semibold);
  font-size: var(--text-base);
  transition: all 0.3s ease;
  cursor: pointer;
  letter-spacing: 0.02em;
  border: 1px solid transparent;
}

.btn-primary {
  background-color: hsla(var(--primary), 1);
  color: white; /* Needs check for contrast, but white on dark primary is standard */
  border: 1px solid hsla(var(--primary), 1);
}

.btn-primary:hover {
  background-color: hsla(var(--primary-deep), 1);
  transform: translateY(-2px);
}

.btn-outline {
  background: transparent;
  border: 1px solid hsla(var(--text-main), 0.2);
  color: hsla(var(--text-main), 1);
}

.btn-outline:hover {
  border-color: hsla(var(--primary), 1);
  color: hsla(var(--primary), 1);
}

/* ===================================
   6. HERO SECTION
   =================================== */

.hero {
  padding-top: 110px;
  padding-bottom: 100px;
  position: relative;
  overflow: hidden;
}

.hero-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 3rem;
  align-items: center;
}

@media (min-width: 1024px) {
  .hero-grid {
    grid-template-columns: 1.2fr 1fr;
    gap: 6rem;
  }
}

.hero-status {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2, 0.5rem);
  font-family: var(--font-body);
  font-size: var(--text-xs);
  font-weight: var(--font-bold);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: hsla(var(--accent-pop), 1);
  margin-bottom: var(--space-6, 1.5rem);
  padding: var(--space-2, 0.5rem) var(--space-4, 1rem);
  background: hsla(var(--surface-pure), 0.5);
  border: 1px solid hsla(var(--text-main), 0.1);
  border-radius: 50px;
}

.status-dot {
  width: 8px;
  height: 8px;
  background-color: #10b981;
  border-radius: 50%;
  box-shadow: 0 0 0 2px hsla(var(--surface-tint), 1);
}

.hero h1 {
  font-size: var(--text-display);
  margin-bottom: 2rem;
}

.hero-desc {
  font-family: var(--font-body);
  font-size: var(--text-lg);
  font-weight: var(--font-normal);
  line-height: var(--leading-relaxed);
  color: hsla(var(--text-muted), 1);
  max-width: 500px;
  margin-bottom: var(--space-12, 3rem);
}

.hero-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
}

/* Hero Image Composition */
.hero-visual {
  position: relative;
}

.hero-main-img {
  border-radius: var(--radius-xl);
  aspect-ratio: 4/5;
  object-fit: cover;
  width: 100%;
}

/* Floating Element */
.float-card {
  position: absolute;
  bottom: 40px;
  left: -40px;
  background: hsla(var(--surface-pure), 0.95);
  backdrop-filter: blur(10px);
  padding: 1.5rem;
  border-radius: var(--radius-sm);
  box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.1);
  max-width: 200px;
  border: 1px solid hsla(var(--text-main), 0.05);
  display: none;
}

@media (min-width: 768px) {
  .float-card {
    display: block;
  }
}

.float-label {
  display: block;
  font-size: var(--text-xs);
  color: hsla(var(--text-muted), 1);
  margin-bottom: 0.25rem;
}

.float-value {
  font-family: var(--font-heading);
  font-size: var(--text-4xl);
  font-weight: var(--font-bold);
  color: hsla(var(--primary), 1);
}

/* ===================================
   7. TRUST STRIP (Marquee)
   =================================== */

.trust-strip {
  border-top: 1px solid hsla(var(--text-main), 0.05);
  border-bottom: 1px solid hsla(var(--text-main), 0.05);
  padding: var(--space-8, 2rem) 0;
  overflow: hidden;
  background: hsla(var(--surface-pure), 0.5);
}

.marquee-wrapper {
  display: flex;
  width: 100%;
  mask-image: linear-gradient(
    to right,
    transparent,
    black 10%,
    black 90%,
    transparent
  );
  -webkit-mask-image: linear-gradient(
    to right,
    transparent,
    black 10%,
    black 90%,
    transparent
  );
}

.marquee-track {
  display: flex;
  gap: var(--space-16, 4rem);
  white-space: nowrap;
  animation: scroll 30s linear infinite;
  padding-left: var(--space-16, 4rem);
}

@keyframes scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.trust-item {
  font-family: var(--font-body);
  font-weight: var(--font-semibold, 600);
  color: hsla(var(--text-muted), 0.6);
  font-size: var(--text-lg, 1.1rem);
  display: flex;
  align-items: center;
  gap: var(--space-2, 0.5rem);
}

/* ===================================
   8. FEATURES
   =================================== */

.features-header {
  max-width: 700px;
  margin-bottom: var(--space-16, 4rem);
}

.features-container {
  display: flex;
  overflow-x: auto;
  gap: var(--space-6, 1.5rem);
  padding-bottom: var(--space-8, 2rem);
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  -ms-overflow-style: none;
  margin: 0 calc(var(--container-padding) * -1);
  padding: 0 var(--container-padding) var(--space-8, 2rem);
}

.features-container::-webkit-scrollbar {
  display: none;
}

@media (min-width: 1024px) {
  .features-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    margin: 0;
    padding: 0;
    overflow: visible;
  }
}

.feature-card {
  min-width: 85%;
  scroll-snap-align: center;
  background: hsla(var(--surface-pure), 1);
  padding: var(--space-8, 2rem);
  border-radius: var(--radius-sm);
  border: 1px solid hsla(var(--text-main), 0.05);
  transition: transform 0.3s ease;
}

@media (min-width: 1024px) {
  .feature-card {
    min-width: auto;
  }
  .feature-card:hover {
    transform: translateY(-10px);
  }
}

.feature-icon {
  font-size: var(--space-8, 2rem);
  color: hsla(var(--primary), 1);
  margin-bottom: var(--space-6, 1.5rem);
  display: inline-block;
}

/* ===================================
   9. COMPARISON SLIDER
   =================================== */

.comparison-section {
  background-color: hsla(var(--text-main), 1);
  color: hsla(var(--surface-tint), 1);
}

.comparison-section h2 {
  color: hsla(var(--surface-tint), 1);
}
.comparison-section p {
  color: hsla(var(--surface-tint), 0.7);
}

.slider-container {
  position: relative;
  width: 100%;
  aspect-ratio: 16/9;
  overflow: hidden;
  border-radius: var(--radius-sm);
  margin-top: var(--space-12, 3rem);
}

.img-background,
.img-foreground {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
}

.img-foreground {
  width: 50%;
  border-right: 2px solid white;
  background-position: left;
  overflow: hidden;
}

.slider-range {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  cursor: ew-resize;
  z-index: 10;
}

.slider-handle {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  background: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: black;
  pointer-events: none;
  z-index: 11;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* ===================================
   10. PORTFOLIO
   =================================== */

.portfolio-grid {
  display: grid;
  gap: var(--space-8, 2rem);
}

@media (min-width: 768px) {
  .portfolio-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-16, 4rem);
  }

  /* Offset effect for editorial look */
  .portfolio-item:nth-child(even) {
    transform: translateY(60px);
  }
}

.portfolio-img {
  aspect-ratio: 4/5;
  width: 100%;
  object-fit: cover;
  border-radius: var(--radius-sm);
  margin-bottom: var(--space-6, 1.5rem);
}

.portfolio-meta {
  font-size: var(--text-xs);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: hsla(var(--primary), 1);
  margin-bottom: var(--space-2, 0.5rem);
}

.portfolio-title {
  font-size: var(--text-xl);
  margin-bottom: var(--space-2, 0.5rem);
}

/* ===================================
   11. MOBILE FAB
   =================================== */

.mobile-fab {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 99;
  background: hsla(var(--text-main), 1);
  color: white;
  padding: 1rem 1.5rem;
  border-radius: 50px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transform: translateY(150%);
  transition: transform 0.4s ease;
}

.mobile-fab.visible {
  transform: translateY(0);
}

@media (min-width: 768px) {
  .mobile-fab {
    display: none;
  }
}

/* Hero Gradient Variants */
.hero--gradient .hero-grid {
  grid-template-columns: 1fr;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  text-align: center;
}

.hero--gradient .hero-actions {
  justify-content: center;
}

.hero--gradient .hero-desc {
  margin-left: auto;
  margin-right: auto;
}

.hero--gradient-primary {
  background: radial-gradient(
      circle at top right,
      hsla(var(--primary), 0.15),
      transparent 60%
    ),
    radial-gradient(
      circle at bottom left,
      hsla(var(--primary), 0.1),
      transparent 60%
    );
}

.hero--gradient-secondary {
  background: radial-gradient(
      circle at top right,
      hsla(var(--text-muted), 0.1),
      transparent 60%
    ),
    linear-gradient(
      to bottom,
      hsla(var(--surface-tint), 1),
      hsla(var(--surface-pure), 1)
    );
}

.hero--gradient-accent {
  background: radial-gradient(
      circle at top right,
      hsla(var(--accent-pop), 0.15),
      transparent 60%
    ),
    radial-gradient(
      circle at bottom left,
      hsla(var(--primary), 0.05),
      transparent 60%
    );
}

/* Hero Headline Styling for RichText */
.hero-headline-wrapper {
  /* Wraps the rich text output which likely contains a clean h1 or nothing if user just typed text, 
       but RichText usually outputs paragraphs or divs unless configured. 
       Actually Wagtail RichText out-of-the-box block outputs internal HTML. 
       If we use features=['italic'], it might wrap in div or p.
       Let's assume the user enters the text. We want it to look like H1. */
}

/* Force rich text content to behave like display heading */
.hero-headline-wrapper h1,
.hero-headline-wrapper p,
.hero-headline-wrapper div {
  font-family: var(--font-heading);
  font-size: var(--text-display);
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  margin-bottom: var(--space-8, 2rem);
  color: hsla(var(--text-main), 1);
}

/* The Accent Styling for Italic */
.hero-headline-wrapper em,
.hero-headline-wrapper i {
  font-family: var(--font-heading);
  font-style: italic;
  font-weight: var(--font-normal);
  color: hsla(var(--accent-pop), 1);
}

/* Ensure Image Aspect Ratio is preserved via CSS */
.hero-main-img {
  width: 100%;
  /* Default to 4/5 as per design, but allow object-fit to handle the crop */
  aspect-ratio: 4/5;
  object-fit: cover;
  border-radius: var(--radius-xl);
}

/* Ensure Floating Card is not clipped */
.reveal-img-wrapper {
  overflow: visible; /* Allow floating elements to spill out */
}

/* Ensure the image container handles the reveal differently if we need overflow visible 
   The 'overflow: hidden' was primarily for the curtain reveal effect. 
   If we remove it, the curtain reveal might break or spill.
   A better approach for the float card is to place it OUTSIDE the wrapper if the wrapper needs clipping.
   However, the reference HTML had it inside. Let's check the reference CSS.
   The specific issue is likely that .float-card uses negative left positioning (-40px).
   If the parent has overflow:hidden, it gets cut.
*/

/* ===================================
   12. SERVICES BLOCK
   =================================== */

/* ===================================
   12. SERVICES BLOCK
   =================================== */

/* Reduce top padding to close gap with Hero */
.services {
    padding-top: var(--space-8, 2rem);
}

@media (min-width: 1024px) {
    .services {
        padding-top: var(--space-16, 4rem);
    }
}

/* Header Block */
.services__header {
    max-width: 720px; /* Match Testimonials width */
    margin: 0 auto var(--space-16, 4rem); /* Center align the block itself, text left inside */
    text-align: left;
    margin-bottom: var(--space-16, 4rem);
}
/* Note: I'm keeping 'margin: 0 auto ...' to center the container, but text-align: left aligns content. 
   Testimonials was 'margin-bottom: ...; max-width: 720px;'. It didn't have auto margins? 
   Let's check Testimonials CSS again.
   .testimonials__header { margin-bottom: 4rem; max-width: 720px; ... }
   If it doesn't have margin auto, it's left aligned relative to container.
   I will remove '0 auto' from services__header to be safe.
*/

.services__header {
    margin-bottom: var(--space-16, 4rem);
    max-width: 720px;
    text-align: left;
}


/* New Pill-style Eyebrow */
.services__eyebrow {
    font-family: var(--font-body);
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: hsla(var(--accent-pop), 1);
    margin-bottom: var(--space-5, 1.25rem);
    display: inline-block;
    border: 1px solid hsla(var(--text-main), 0.1);
    padding: 0.35em 0.75em; /* Match Testimonials pill padding */
    border-radius: var(--radius-full);
    background: hsla(var(--surface-pure), 0.5);
    backdrop-filter: blur(4px);
}

.services__heading {
    margin-bottom: var(--space-6, 1.5rem);
}

.services__heading > * {
    font-family: var(--font-display);
    font-size: clamp(2rem, 5vw, 3.5rem); /* Match Testimonials size */
    font-weight: var(--font-bold);
    line-height: var(--leading-tight);
    margin: 0;
    color: hsla(var(--text-main), 1);
    letter-spacing: -0.02em;
}

@media (min-width: 768px) {
    /* Testimonials doesn't have this specific media query adjustment for heading size because of clamp. 
       Removing specific overrides to rely on clamp. */
}

.services__heading span,
.services__heading em,
.services__heading i {
    font-style: italic;
    color: hsla(var(--accent-pop), 1);
}

.services__intro {
    font-family: var(--font-body);
    font-size: var(--text-lg);
    font-weight: var(--font-normal);
    line-height: var(--leading-relaxed);
    color: hsla(var(--text-muted), 1);
    max-width: 600px;
    margin-right: auto;
}

/* The Grid / Slider Container */
.services__grid {
    /* Mobile: Snap Scroll Behavior */
    display: flex;
    gap: var(--space-6, 1.5rem);
    overflow-x: auto;
    padding-bottom: var(--space-12, 3rem); /* Space for shadow/hover */
    scroll-snap-type: x mandatory;
    
    /* Hide Scrollbar */
    scrollbar-width: none;
    -ms-overflow-style: none;
    
    /* Full bleed on mobile hack */
    margin: 0 calc(var(--container-padding) * -1);
    padding-left: var(--container-padding);
    padding-right: var(--container-padding);
}

.services__grid::-webkit-scrollbar { display: none; }

@media (min-width: 1024px) {
    .services__grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        margin: 0;
        padding-left: 0;
        padding-right: 0;
        padding-bottom: 0;
        overflow: visible;
        gap: var(--space-8, 2rem);
    }
}

/* The Card */
.services__card {
    position: relative;
    min-width: 85vw; /* Mobile width */
    scroll-snap-align: center;
    
    background-color: hsla(var(--surface-pure), 1);
    border: 1px solid hsla(var(--text-main), 0.06);
    border-radius: var(--radius-sm); /* Sharp architectural feel */
    
    display: flex;
    flex-direction: column;
    transition: all 0.4s var(--ease-out-expo);
}

@media (min-width: 768px) {
    .services__card { min-width: 45vw; }
}

@media (min-width: 1024px) {
    .services__card { min-width: auto; height: 100%; }
}

/* Hover Effect (Desktop) */
@media (hover: hover) {
    .services__card:hover {
        transform: translateY(-8px);
        border-color: hsla(var(--primary), 0.3);
        box-shadow: 0 20px 40px -10px hsla(var(--brand-h), var(--brand-s), 20%, 0.1);
    }
}

.card__body {
    padding: var(--space-10, 2.5rem);
    display: flex;
    flex-direction: column;
    height: 100%;
}

/* Icon Wrapper */
.services__icon-wrapper {
    margin-bottom: var(--space-8, 2rem);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.services__icon {
    font-size: var(--text-4xl);
    color: hsla(var(--primary), 1);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 3.5rem;
    height: 3.5rem;
    background: hsla(var(--surface-tint), 1);
    border-radius: var(--radius-xl);
}

.services__icon img {
    width: 60%;
    height: 60%;
    object-fit: contain;
}

/* Decorative Index Number */
.services__index {
    font-family: var(--font-heading);
    font-size: var(--text-5xl);
    font-weight: var(--font-normal);
    line-height: 1;
    color: hsla(var(--text-main), 0.05);
    font-style: italic;
    user-select: none;
}

.services__card-title {
    font-family: var(--font-display);
    font-size: var(--text-xl); /* Match Testimonial quote size */
    font-weight: var(--font-light);
    font-style: italic;
    line-height: var(--leading-tight);
    margin-bottom: var(--space-4, 1rem);
    text-align: left;
}

.services__card-description {
    font-family: var(--font-body);
    font-size: var(--text-base);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
    color: hsla(var(--text-muted), 1);
    margin-bottom: var(--space-10, 2.5rem);
    flex-grow: 1;
}

.services__card-description p { margin-bottom: 1em; }
.services__card-description p:last-child { margin-bottom: 0; }

/* Link Button */
.btn--link {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2, 0.5rem);
    font-family: var(--font-body);
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: hsla(var(--primary), 1);
    text-decoration: none;
    transition: color 0.3s ease;
    margin-top: auto;
}

.btn--link span { transition: transform 0.3s ease; display: inline-block; }

.services__card:hover .btn--link { color: hsla(var(--accent-pop), 1); }
.services__card:hover .btn--link span { transform: translateX(6px); }

/* Animation Stagger Classes */
.delay-100 { transition-delay: 0.1s; }
.delay-200 { transition-delay: 0.2s; }
.delay-300 { transition-delay: 0.3s; }
.delay-400 { transition-delay: 0.4s; }

/* Responsive adjustments for Hero Image on Mobile */
@media (max-width: 1023px) {
    .hero-visual {
        display: none;
    }
}


/* ===================================
   13. TESTIMONIALS BLOCK
   =================================== */

/* Dark Theme Override for this section */
.section--dark {
    background-color: hsla(var(--text-main), 1);
    color: hsla(var(--surface-tint), 1);
    position: relative;
    overflow: hidden;
}

/* Ambient Glow Effect */
.section--dark::before {
    content: '';
    position: absolute;
    top: -20%;
    right: -10%;
    width: 60%;
    height: 60%;
    background: radial-gradient(circle, hsla(var(--brand-h), var(--brand-s), 45%, 0.15) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
}

.testimonials__header {
    margin-bottom: var(--space-16, 4rem);
    max-width: 720px;
    position: relative;
    z-index: 1;
}

.testimonials__eyebrow {
    font-family: var(--font-body);
    font-size: var(--text-xs);
    text-transform: uppercase;
    letter-spacing: 0.15em;
    font-weight: var(--font-bold);
    color: hsla(var(--brand-h), 60%, 70%, 1); /* Lighter Gold for Dark Mode */
    margin-bottom: var(--space-5, 1.25rem);
    display: inline-block;
    border: 1px solid hsla(var(--surface-tint), 0.1);
    padding: 0.35em 0.75em;
    border-radius: var(--radius-full);
    background: hsla(var(--surface-pure), 0.05); /* Tokenized white opacity */
    backdrop-filter: blur(4px);
}

.testimonials__heading {
    margin-bottom: var(--space-6, 1.5rem);
    color: hsla(var(--surface-tint), 1);
}

.testimonials__heading > * {
    font-family: var(--font-display);
    font-size: clamp(2rem, 5vw, 3.5rem);
    line-height: var(--leading-tight);
    margin: 0;
}

.testimonials__heading em,
.testimonials__heading i {
    font-style: italic;
    color: hsla(var(--brand-h), 60%, 70%, 1);
}

.testimonials__grid {
    display: flex;
    gap: var(--space-8, 2rem);
    overflow-x: auto;
    padding-bottom: var(--space-12, 3rem);
    scroll-snap-type: x mandatory;
    
    /* Full bleed mobile */
    margin: 0 calc(var(--container-padding) * -1);
    padding-left: var(--container-padding);
    padding-right: var(--container-padding);
    
    scrollbar-width: none;
    position: relative;
    z-index: 1;
}

.testimonials__grid::-webkit-scrollbar { display: none; }

@media (min-width: 1024px) {
    .testimonials__grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        margin: 0;
        padding-left: 0;
        padding-right: 0;
        padding-bottom: 0;
        overflow: visible;
    }
}

.testimonial-card {
    min-width: 85vw;
    scroll-snap-align: center;
    background: hsla(var(--surface-pure), 0.03); /* Subtle Glass Tokenized */
    border: 1px solid hsla(var(--surface-pure), 0.1);
    border-radius: var(--radius-sm);
    padding: var(--space-10, 2.5rem);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: all 0.4s var(--ease-out-expo);
    position: relative;
}

@media (min-width: 768px) { .testimonial-card { min-width: 45vw; } }

@media (min-width: 1024px) { 
    .testimonial-card { min-width: auto; height: 100%; } 
    .testimonial-card:hover {
        background: hsla(var(--surface-pure), 0.06);
        transform: translateY(-8px);
        border-color: hsla(var(--brand-h), 60%, 70%, 0.3);
    }
}

/* Huge Quote Mark */
.testimonial-card::after {
    content: 'â€œ';
    position: absolute;
    top: 0rem;
    right: 1.5rem;
    font-family: var(--font-display);
    font-size: 8rem; /* Decorative huge size */
    color: hsla(var(--brand-h), 60%, 70%, 0.1);
    line-height: 1;
    pointer-events: none;
    font-style: italic;
}

.testimonial__stars {
    color: hsla(var(--brand-h), 60%, 70%, 1);
    font-size: var(--text-base);
    margin-bottom: var(--space-6, 1.5rem);
    letter-spacing: 0.1em;
}

/* Utility: Text Emphasis */
.italic-accent {
  font-style: italic;
  font-weight: var(--font-light);
  color: hsla(var(--accent-pop), 1);
}

.testimonial__quote {
    font-family: var(--font-display); /* Editorial feel */
    font-size: var(--text-xl, 1.25rem);
    line-height: var(--leading-normal);
    margin-bottom: var(--space-8, 2rem);
    color: hsla(var(--surface-tint), 0.95);
    font-style: italic; /* Makes it feel like a voice */
    font-weight: var(--font-light);
}

.testimonial__author {
    display: flex;
    align-items: center;
    gap: var(--space-4, 1rem);
    margin-top: auto;
    border-top: 1px solid hsla(var(--surface-pure), 0.1);
    padding-top: var(--space-6, 1.5rem);
}

.author__avatar {
    width: var(--space-12, 48px);
    height: var(--space-12, 48px);
    border-radius: 50%;
    background-color: hsla(var(--surface-tint), 0.2);
    object-fit: cover;
}

.author__info {
    font-family: var(--font-body);
}

.author__info h4 {
    font-size: var(--text-base);
    font-weight: var(--font-bold);
    color: hsla(var(--surface-tint), 1);
    margin-bottom: 0.2rem;
    line-height: var(--leading-tight);
}

.author__info p {
    font-size: var(--text-xs);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: hsla(var(--surface-tint), 0.6);
}

/* ===================================
   14. FOOTER
   =================================== */

.footer {
    border-top: 1px solid hsla(var(--text-main), 0.1);
    background-color: hsla(var(--surface-tint), 1);
    padding: var(--section-gap) 0;
}

.footer__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-12, 3rem);
    align-items: flex-start;
}

@media (min-width: 768px) {
    .footer__grid {
        grid-template-columns: 1.2fr 1fr;
        gap: var(--space-16, 4rem);
    }
}

.footer__brand-name {
    font-family: var(--font-heading);
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    line-height: var(--leading-tight);
    margin-bottom: var(--space-4, 1rem);
}

.footer__tagline {
    font-family: var(--font-body);
    font-size: var(--text-base);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
    color: hsla(var(--text-muted), 1);
}

.footer__links {
    display: flex;
    gap: var(--space-16, 4rem);
    flex-wrap: wrap;
}

.footer__section-title {
    font-family: var(--font-body);
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: var(--space-4, 1rem);
}

.footer__text {
    font-family: var(--font-body);
    font-size: var(--text-base);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
}

.footer__text--spaced {
    margin-bottom: var(--space-2, 0.5rem);
}

.footer__text--address {
    margin-top: var(--space-4, 1rem);
    white-space: pre-line;
}

.footer__link {
    color: inherit;
    transition: color 0.3s ease;
}

.footer__link:hover {
    color: hsla(var(--primary), 1);
}
