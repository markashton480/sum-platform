{% load wagtailcore_tags %}

<section class="py-24 bg-sage-linen overflow-hidden">
    <div class="container mx-auto px-4">
        <div class="grid lg:grid-cols-12 gap-16">
            <!-- Left Column: Header (Sticky on desktop) -->
            <div class="lg:col-span-5 lg:sticky lg:top-32 lg:self-start reveal">
                {% if self.eyebrow %}
                    <div class="text-[10px] font-bold uppercase tracking-[0.2em] text-sage-label mb-4">
                        {{ self.eyebrow }}
                    </div>
                {% endif %}

                <div class="font-display text-4xl md:text-5xl text-sage-black mb-8">
                    {{ self.heading|richtext }}
                </div>

                {% if self.intro %}
                    <div class="text-lg text-sage-black/70 leading-relaxed font-body max-w-md">
                        {{ self.intro|richtext }}
                    </div>
                {% endif %}
            </div>

            <!-- Right Column: Process Steps -->
            <div class="lg:col-span-7 space-y-12 relative">
                <!-- Connecting line -->
                <div class="hidden lg:block absolute left-8 top-12 bottom-12 w-px bg-sage-moss/20"></div>

                {% for step in self.steps %}
                    <div class="reveal delay-{{ forloop.counter0|add:1 }}00 flex gap-10 relative group">
                        <div class="flex-shrink-0 w-16 h-16 rounded-sm bg-sage-oat border border-sage-moss/20 text-sage-moss flex items-center justify-center font-display text-xl font-bold relative z-10 transition-colors duration-500 group-hover:bg-sage-moss group-hover:text-sage-linen">
                            {% if step.number %}
                                {% if step.number < 10 %}0{% endif %}{{ step.number }}
                            {% else %}
                                {% if forloop.counter < 10 %}0{% endif %}{{ forloop.counter }}
                            {% endif %}
                        </div>
                        <div class="flex-1 pt-2">
                            <h3 class="font-display text-2xl text-sage-black mb-4 tracking-tight">{{ step.title }}</h3>
                            {% if step.description %}
                                <div class="text-sage-black/70 leading-relaxed font-body prose prose-sage max-w-none">
                                    {{ step.description|richtext }}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>
