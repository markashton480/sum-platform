============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0 -- /home/mark/workspaces/sum-platform/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/mark/workspaces/sum-platform
configfile: pyproject.toml
plugins: cov-7.0.0
collecting ... collected 1 item

tests/leads/test_email_templates.py::TestEmailTemplates::test_subject_template_renders_correctly ERROR [100%]

==================================== ERRORS ====================================
_ ERROR at setup of TestEmailTemplates.test_subject_template_renders_correctly _
file /home/mark/workspaces/sum-platform/tests/leads/test_email_templates.py, line 42
      def test_subject_template_renders_correctly(self, lead_with_attribution):
file /home/mark/workspaces/sum-platform/tests/leads/test_email_templates.py, line 16
  @pytest.fixture
  def lead_with_attribution(db):
E       fixture 'db' not found
>       available fixtures: _reset_homepage_between_tests, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, cov, django_test_environment, doctest_namespace, lead_with_attribution, monkeypatch, no_cover, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, wagtail_default_site
>       use 'pytest --fixtures [testpath]' for help on them.

/home/mark/workspaces/sum-platform/tests/leads/test_email_templates.py:16
=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py:1148
.venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py:1148
.venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py:1148
.venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py:1148
.venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py:1148
.venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py:1148
  /home/mark/workspaces/sum-platform/.venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py:1148: RemovedInDjango60Warning: The default scheme will be changed from 'http' to 'https' in Django 6.0. Pass the forms.URLField.assume_scheme argument to silence this warning, or set the FORMS_URLFIELD_ASSUME_HTTPS transitional setting to True to opt into using 'https' as the new default scheme.
    return form_class(**defaults)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                                    Stmts   Miss  Cover   Missing
-----------------------------------------------------------------------------------------------------
boilerplate/__init__.py                                                     0      0   100%
cli/__init__.py                                                             0      0   100%
clients/__init__.py                                                         0      0   100%
core/__init__.py                                                            0      0   100%
core/sum_core/__init__.py                                                   2      0   100%
core/sum_core/analytics/__init__.py                                         0      0   100%
core/sum_core/apps.py                                                       8      0   100%
core/sum_core/blocks/__init__.py                                           13      0   100%
core/sum_core/blocks/base.py                                               41      0   100%
core/sum_core/blocks/content.py                                           134      0   100%
core/sum_core/blocks/forms.py                                              24      0   100%
core/sum_core/blocks/gallery.py                                            19      0   100%
core/sum_core/blocks/hero.py                                               33      0   100%
core/sum_core/blocks/links.py                                             120     86    28%   68-93, 109-143, 148, 163-172, 184-196, 206-211, 299-349
core/sum_core/blocks/process_faq.py                                        50     12    76%   95-123
core/sum_core/blocks/services.py                                           23      0   100%
core/sum_core/blocks/testimonials.py                                       19      0   100%
core/sum_core/blocks/trust.py                                              32      0   100%
core/sum_core/branding/__init__.py                                          0      0   100%
core/sum_core/branding/forms.py                                            29     14    52%   56-57, 61-75
core/sum_core/branding/models.py                                           50      8    84%   206-207, 210-211, 214-217
core/sum_core/branding/panels.py                                           16      6    62%   27-28, 34-36, 40
core/sum_core/branding/templatetags/__init__.py                             0      0   100%
core/sum_core/branding/templatetags/branding_tags.py                      111    111     0%   9-215
core/sum_core/branding/theme_presets.py                                    16      3    81%   78-80
core/sum_core/celery.py                                                    10     10     0%   9-33
core/sum_core/forms/__init__.py                                             1      0   100%
core/sum_core/forms/admin.py                                                9      0   100%
core/sum_core/forms/apps.py                                                 6      0   100%
core/sum_core/forms/models.py                                              22      4    82%   70, 80-81, 86
core/sum_core/forms/services.py                                            81     81     0%   9-258
core/sum_core/forms/urls.py                                                 5      5     0%   9-16
core/sum_core/forms/views.py                                               95     95     0%   9-273
core/sum_core/integrations/__init__.py                                      0      0   100%
core/sum_core/leads/__init__.py                                             1      0   100%
core/sum_core/leads/admin.py                                               30      3    90%   111-112, 116
core/sum_core/leads/apps.py                                                 9      0   100%
core/sum_core/leads/attribution.py                                         47     47     0%   9-162
core/sum_core/leads/models.py                                              96     20    79%   196, 260-269, 273-287
core/sum_core/leads/services.py                                            60     60     0%   9-222
core/sum_core/leads/tasks.py                                              113     94    17%   42, 75, 110-188, 213-333
core/sum_core/leads/wagtail_admin.py                                       74     26    65%   30-38, 159-160, 165, 169-170, 180-202, 215-228, 235
core/sum_core/models.py                                                     3      0   100%
core/sum_core/navigation/__init__.py                                        1      0   100%
core/sum_core/navigation/apps.py                                            8      0   100%
core/sum_core/navigation/blocks.py                                         28      0   100%
core/sum_core/navigation/cache.py                                          91     58    36%   55, 68, 84-101, 116-127, 137-140, 151-154, 165-168, 176-185, 194-203, 213-231
core/sum_core/navigation/models.py                                         50      0   100%
core/sum_core/navigation/services.py                                       66     66     0%   14-324
core/sum_core/navigation/templatetags/__init__.py                           0      0   100%
core/sum_core/navigation/templatetags/navigation_tags.py                  342    342     0%   14-890
core/sum_core/pages/__init__.py                                            12     10    17%   16-28
core/sum_core/pages/apps.py                                                 7      0   100%
core/sum_core/pages/mixins.py                                              60     32    47%   59-69, 73, 82-86, 120-122, 126-128, 136-144, 161-179
core/sum_core/pages/models.py                                               4      0   100%
core/sum_core/pages/services.py                                            43     11    74%   59-65, 126-134
core/sum_core/pages/standard.py                                            25      7    72%   59-67
core/sum_core/seo/__init__.py                                               0      0   100%
core/sum_core/templatetags/__init__.py                                      0      0   100%
core/sum_core/templatetags/branding_tags.py                                 2      2     0%   9-11
core/sum_core/templatetags/form_tags.py                                    22     22     0%   9-106
core/sum_core/templatetags/navigation_tags.py                               2      2     0%   9-11
core/sum_core/test_project/__init__.py                                      0      0   100%
core/sum_core/test_project/home/__init__.py                                 0      0   100%
core/sum_core/test_project/home/apps.py                                     5      0   100%
core/sum_core/test_project/home/management/__init__.py                      0      0   100%
core/sum_core/test_project/home/management/commands/__init__.py             0      0   100%
core/sum_core/test_project/home/management/commands/setup_homepage.py      19     19     0%   4-36
core/sum_core/test_project/home/models.py                                  34     11    68%   72, 81-84, 89-99
core/sum_core/test_project/manage.py                                        8      8     0%   9-20
core/sum_core/test_project/test_project/__init__.py                         0      0   100%
core/sum_core/test_project/test_project/settings.py                        71      9    87%   39, 45, 135-140, 160
core/sum_core/test_project/test_project/urls.py                            11     11     0%   9-27
core/sum_core/test_project/test_project/wsgi.py                             5      5     0%   9-17
core/sum_core/utils/__init__.py                                             2      0   100%
core/sum_core/utils/contact.py                                              9      6    33%   36-45
infrastructure/__init__.py                                                  0      0   100%
scripts/__init__.py                                                         0      0   100%
-----------------------------------------------------------------------------------------------------
TOTAL                                                                    2329   1306    44%
Coverage HTML written to dir htmlcov
=========================== short test summary info ============================
ERROR tests/leads/test_email_templates.py::TestEmailTemplates::test_subject_template_renders_correctly
======================== 6 warnings, 1 error in 42.52s =========================
