I’ve reviewed the agent log: NAV-001 looks **functionally on-spec** (5 link types, computed properties incl. `opens_new_tab` override, validation, and a solid test suite). The only notable divergence is **test placement**: the repo convention won, so tests landed under `tests/navigation/` rather than `sum_core/navigation/tests/` (and the temporary `sum_core/navigation/` folder was removed). That’s not a blocker, but it’s worth keeping consistent going forward.

---

## Ticket: NAV-002 — Implement Navigation StreamField Blocks (MenuItem/Submenu/Footer sections)

**Type:** Feature (Phase 1: Foundation)
**Priority:** P0
**Depends on:** NAV-001 (`UniversalLinkBlock` implemented + exported)
**Spec refs:** Task 1.2 + block field definitions + constraints

### Background / Context

The navigation models (HeaderNavigation/FooterNavigation) will use a small set of reusable StreamField blocks to define menu items, sub-items, and footer link sections. These must be implemented now so the settings models (NAV-003) can be built cleanly and consistently.

### Scope

Create the navigation “blocks” module with:

- `SubmenuItemBlock` (label + UniversalLinkBlock)
- `MenuItemBlock` (label + UniversalLinkBlock + optional children list)
- `FooterLinkSectionBlock` (title + list of UniversalLinkBlock)

Include max item constraints:

- Max **8 children** per `MenuItemBlock`
- Max **10 links** per `FooterLinkSectionBlock`

> Note: Max **8 top-level** menu items is enforced at the **HeaderNavigation StreamField** level in NAV-003.

---

## Requirements

### Block definitions

**File:** `core/sum_core/navigation/blocks.py`

#### `SubmenuItemBlock`

Fields:

- `label`: `CharBlock(max_length=50, required=True)`
- `link`: `UniversalLinkBlock(required=True)`

#### `MenuItemBlock`

Fields:

- `label`: `CharBlock(max_length=50, required=True)`
- `link`: `UniversalLinkBlock(required=True)`
- `children`: `ListBlock(SubmenuItemBlock, required=False, max_num=8)`

#### `FooterLinkSectionBlock`

Fields:

- `title`: `CharBlock(max_length=50, required=True)`
- `links`: `ListBlock(UniversalLinkBlock, required=True, max_num=10)`

### Packaging / imports

- Create package dir and init: `core/sum_core/navigation/__init__.py`
- Ensure blocks import `UniversalLinkBlock` from `sum_core.blocks` (not from a relative path) so it stays the shared primitive.

### Validation / constraints

- Max constraints must be enforced in Wagtail admin (via `max_num`) and also covered by tests (attempt to clean with too many items should raise validation error).

---

## Acceptance Criteria (DoD)

1. `core/sum_core/navigation/blocks.py` exists and defines the three blocks exactly as specified.
2. `MenuItemBlock.children` enforces **max 8** submenu items.
3. `FooterLinkSectionBlock.links` enforces **max 10** links.
4. Blocks correctly depend on `UniversalLinkBlock` (no duplicated link logic).
5. Unit tests for these constraints exist and pass under the repo’s test conventions (currently `tests/navigation/…`).

---

## Tasks / Subtasks

### A) Create navigation package + blocks module

- [ ] Add `core/sum_core/navigation/__init__.py`
- [ ] Add `core/sum_core/navigation/blocks.py` with:

  - [ ] `SubmenuItemBlock`
  - [ ] `MenuItemBlock` + `children max_num=8`
  - [ ] `FooterLinkSectionBlock` + `links max_num=10`

### B) Tests

**File:** `tests/navigation/test_menu_blocks.py` _(align with current repo test layout used in NAV-001)_

- [ ] `test_menu_item_children_max_8_enforced`
- [ ] `test_footer_section_links_max_10_enforced`
- [ ] (Optional sanity) `test_blocks_can_clean_minimal_valid_values` for each block

---

## Manual QA (for later)

None required for NAV-002 alone (blocks aren’t visible in admin until embedded in settings models). Manual admin QA will be done once NAV-003 wires these blocks into `HeaderNavigation` / `FooterNavigation` settings.

---

## Out of Scope

- Settings models (`HeaderNavigation`, `FooterNavigation`) and migrations (NAV-003)
- Template tags, cache layer, templates, JS/CSS (Phase 2+)
