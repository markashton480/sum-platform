
## **[M3-002] HomePage**

**Context (from PRD)**

* **US-P01: Homepage** requires a flexible `HomePage` with StreamField body, access to the full homepage block set, SEO fields (meta title/description + OG image), and “only one HomePage per site”.

**Technical Requirements**

* Implement/upgrade a `HomePage` Wagtail model that satisfies PRD AC1–AC5.
* Must use the **page mixins** introduced in PAGES-001 (`SeoFieldsMixin`, `OpenGraphMixin`, and (optionally) `BreadcrumbMixin`) so HomePage gets **meta title, meta description, OG image**.
* `HomePage.body` must be a `StreamField` that accepts the blocks listed in PRD AC2 (this should map to your existing “all blocks” stream block, e.g. `PageStreamBlock`).
* Enforce: **only one `HomePage` per site** (PRD AC4).
* Templates must remain namespaced under `sum_core/templates/sum_core/…`.

**Design Specifications** (from Implementation Plan – CSS & Tokens guide)

* Template/layout must follow the platform conventions:

  * Section layout uses `.section` + `.container` where appropriate.
  * No inline styles, headings use role classes, spacing/colors via tokens only (token compliance checklist).

**Implementation Guidelines**

* **Find the existing HomePage** (there may already be a placeholder HomePage in the test project / current codebase). Prefer *updating* it over creating a second competing model.
* Suggested files (adjust to match the repo’s actual structure):

  * `core/sum_core/pages/home.py` (or wherever page models live)
  * `core/sum_core/pages/__init__.py` (export the model if you’re doing that pattern)
  * `core/sum_core/templates/sum_core/home_page.html`
  * A Django migration for the model changes
  * Tests under `tests/pages/…` and `tests/templates/…`
* Add required header comments to any new/modified Python module:

  ```python
  """
  Name: [Module Name]
  Path: [File path]
  Purpose: [Brief description]
  Family: [What depends on this]
  Dependencies: [What this depends on]
  """
  ```
* Ensure HomePage integrates smoothly with what PAGES-001 already wired (`base.html` includes `meta_tags.html` etc.).

**Acceptance Criteria**

* `HomePage` exists and is creatable in Wagtail admin.
* `HomePage.body` is a StreamField that accepts the homepage blocks list from PRD AC2.
* HomePage has SEO/OG editing UI in the Promote tab via the mixins (meta title, meta description, OG image).
* Only one HomePage is allowed **per site** (with a clear validation error message).
* `home_page.html` renders the StreamField body and produces correct spacing/structure consistent with the CSS/token rules.
* All tests pass.

**Dependencies & Prerequisites**

* PAGES-001 complete (mixins + meta tags wiring).

**Testing Requirements**

* Unit/integration tests to add:

  * Creating a HomePage under the correct parent works.
  * Attempting to create a **second HomePage in the same site** fails validation.
  * Rendering the HomePage returns 200 and includes the StreamField output (basic smoke test).
* Manual checklist:

  * Create HomePage in admin → add a couple of blocks → publish → confirm render matches expectations.
  * Confirm Promote tab shows SEO + OG fields.
  * Confirm `meta_tags.html` outputs tags for HomePage when fields are set.

**Estimated Complexity**

* Time: **M**
* Risk: **Medium** (the “one per site” enforcement is the main edge-case area)
