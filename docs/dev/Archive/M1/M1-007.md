## **Task ID**: M1-007 / DESIGN-008

**Title**: Component & Navigation CSS using Token System

### Goal

Implement core component-level CSS (buttons, navigation, cards, and basic form styling) in `main.css`, using only design tokens, and wire navigation classes into the shared header template so the test project feels like a coherent, premium UI.

---

### Workstream & Milestone

* **Workstream**: 2 – Design System & Base Templates
* **Milestone**: 1 – Design System & Base Templates

---

### Inputs Required

**PRD / Design System**

* Milestone 1 core deliverables:

  * “Component CSS (buttons, cards, forms, navigation) using tokens exclusively”
  * “Section wrapper patterns and container styles”
* Design system spec:

  * Tokenised colours, typography, spacing, radius, shadows.
  * Emphasis on “frame not paint”: structure, spacing, and hierarchy must carry the premium feel; colours/fonts are dynamic via tokens.
* Premium Trade HTML reference:

  * Button hierarchy (primary CTA, secondary, ghost/link styles).
  * Card layouts (e.g. service cards, testimonial cards) for inspiration.
  * Form layout (labels above fields, generous spacing, clear error states).

**Existing implementation**

* `core/sum_core/static/sum_core/css/main.css`:

  * Tokens, typography utilities, layout shell (`.layout`, `.section`, `.container`, etc.).
* `core/sum_core/templates/sum_core/base.html` and includes:

  * Header uses `.layout__header` and `.site-header__*` with `{% block primary_nav %}` hook.
  * Footer uses `.site-footer__*` pattern.
* `sum_core/home_page.html`:

  * Uses `.section` / `.container` and heading/body utilities.

---

### Files / Modules to Touch

* **Modify**: `core/sum_core/static/sum_core/css/main.css`

  * Add component sections for:

    * Buttons
    * Navigation
    * Cards
    * Basic forms
    * Section modifiers

* **Modify**: `core/sum_core/templates/sum_core/includes/header.html`

  * Wire in navigation markup using new nav classes (inside `{% block primary_nav %}` or as default nav).

* **New (optional)**: a tiny demo nav snippet in `home_page.html` just to exercise styles (can be minimal).

* **Tests**:

  * **New**: `tests/templates/test_navigation_template.py`
  * **Maybe**: extend `tests/templates/test_base_template.py` to assert button/nav classes appear in rendered HTML.

---

### Implementation Guidelines

#### 1. Button system

In `main.css`, add a **Buttons** section, following the design system:

Classes (suggested):

* `.btn` – base button:

  * Inline-flex, center-aligned
  * Border-radius from token: `var(--radius-md)`
  * Padding from spacing tokens: e.g. `var(--space-3) var(--space-5)`
  * Font: `var(--font-body)` or a button-specific utility class
  * `font-weight: 600` (token-based if you’ve defined one)
* Variants:

  * `.btn--primary`

    * Background: `var(--color-primary)`
    * Text: `var(--color-on-primary)` or `var(--color-text-inverse)` if you have it
    * Hover: darker using `--color-primary-deep` or a sensible darker token
  * `.btn--secondary`

    * Background: `var(--color-secondary)` or `var(--color-surface)`
    * Border: `1px solid var(--color-border)`
  * `.btn--ghost`

    * Transparent background
    * Borderless or subtle border
    * Uses `--color-text` for text
  * `.btn--link`

    * Looks like a link (no background, underline on hover).
* Sizes:

  * `.btn--sm`, `.btn--lg` to adjust padding and maybe font-size via tokens.

**Constraints:**

* No hard-coded colours: only `var(--color-*)`.
* No raw px except where absolutely required; prefer spacing tokens.

#### 2. Navigation styles

Navigation will be used in `header.html` and future page templates.

Classes:

* `.site-nav`
* `.site-nav__list`
* `.site-nav__item`
* `.site-nav__link`
* `.site-nav__link--active`

Behaviour:

* Horizontal layout on desktop:

  * `.site-nav__list` → flex row, gap via `var(--space-4)` etc.
* Link states:

  * Default: `color: var(--color-text);`
  * Hover/active: accent or primary, e.g. `var(--color-accent)` or `var(--color-primary)`.
  * Use understated bottom border or background for active, using `--color-surface` / `--color-surface-elevated`.

Then, in `includes/header.html`, within the `site-header__inner`:

* Provide a default implementation of `primary_nav` using these classes, something like:

  ```django
  <nav class="site-header__nav site-nav">
    <ul class="site-nav__list">
      <li class="site-nav__item">
        <a href="/" class="site-nav__link site-nav__link--active">Home</a>
      </li>
    </ul>
  </nav>
  ```

* Keep the `{% block primary_nav %}` hook so client sites can override/extend.

#### 3. Card styles

Cards will support things like service cards, stat blocks, testimonials.

In `main.css`:

* `.card`

  * Background: `var(--color-surface)` or `var(--color-surface-elevated)`
  * Border-radius: `var(--radius-lg)` (or `--radius-md`)
  * Padding: `var(--space-5)` / `var(--space-6)`
  * Shadow: a tokenised shadow class, e.g. `.shadow-elevated` or direct `box-shadow` using shadow tokens.
* Structure:

  * `.card__header`
  * `.card__body`
  * `.card__footer`
  * Use vertical rhythm via spacing tokens (e.g. `gap` in a flex/column).

No page templates should depend on these yet beyond the `HomePage` using them lightly, e.g. a simple 2–3 card demo row if you want visible output.

#### 4. Basic form styles

Forms will be heavily used for leads later, so we want a clean baseline:

Classes:

* `.form`
* `.form__row`
* `.form__field`
* `.form__label`
* `.form__control` (for `<input>`, `<textarea>`, `<select>`)
* `.form__error`
* `.form__hint`

Rules:

* Labels above inputs, with spacing via tokens (`margin-bottom: var(--space-1)`).
* Inputs:

  * `border-radius: var(--radius-sm)`
  * `border: 1px solid var(--color-border)`
  * `padding: var(--space-2) var(--space-3)`
  * Focus state: clear outline/border colour using `--color-primary`.
* Errors:

  * Colour: `var(--color-error)` if defined; otherwise `var(--color-accent)` reused.
  * Slightly smaller text but still accessible.

We don’t need to change any Django/Wagtail form templates in this task; just define the CSS classes that we’ll apply later when we build actual form components.

#### 5. Section modifiers & containers

You already have `.section` and `.container`. Formalise and extend:

* `.section` – base vertical padding & background:

  * `padding-block: var(--space-10)` (or appropriate token)
* Modifiers:

  * `.section--tight` – reduced vertical spacing (for stacked content).
  * `.section--muted` – uses `--color-surface` / `--color-surface-alt` background.
  * `.section--inset` – narrower content, maybe via a max-width wrapper inside `.container`.
* Ensure all such spacing uses `var(--space-*)`.

Use these in `home_page.html` (you already use `.section`/`.container`; you might just add a modifier where it makes sense).

---

### Acceptance Criteria

* [ ] `main.css` has clearly labelled sections for:

  * Buttons (`.btn`, `.btn--primary`, `.btn--secondary`, `.btn--ghost`, `.btn--link`, sizes).
  * Navigation (`.site-nav*` classes).
  * Cards (`.card*` classes).
  * Basic forms (`.form*` classes).
  * Section modifiers (`.section--*`).
* [ ] All new styles:

  * Use **only** tokens (`var(--color-*)`, `var(--space-*)`, `var(--radius-*)`, `var(--shadow-*)`, etc.) – no hard-coded hex or arbitrary values.
  * Are responsive-friendly (flex layouts where appropriate, no fixed widths).
* [ ] `includes/header.html`:

  * Renders a default primary nav using `.site-nav*` classes.
  * Still exposes `{% block primary_nav %}` hook for overrides.
* [ ] `home_page.html`:

  * Uses `.section` and `.container` as already implemented.
  * May optionally use `.card` and `.btn` in a small demo area to exercise styles.
* [ ] `make lint` and `make test` still pass (no Python changes beyond imports/tests).

---

### Testing Requirements

**Unit / Template tests**

Add `tests/templates/test_navigation_template.py`:

* Mark the module with `pytestmark = pytest.mark.django_db`.

* Create a simple `HomePage` (you can reuse the fixture/pattern from `test_home_page.py`).

* Render the page as root, e.g.:

  ```python
  rendered = client.get("/").content.decode()
  ```

* Assert:

  * The rendered HTML includes `.site-nav__list` and `.site-nav__link`.
  * The link to `/` has class `site-nav__link--active` in this simple case.
  * Buttons (if you add a demo CTA) use `.btn` + variant class.

Optionally, extend `test_base_template.py`:

* Assert that the base template still includes `main.css` and that the new CSS file hasn’t broken anything.

**Manual check**

* Run `runserver`.
* Open `/`.
* Confirm visually:

  * Buttons look coherent (hover/active states).
  * Nav links are styled and sit correctly in the header.
  * Cards (if present) look like elevated surfaces with appropriate padding.
  * Forms (if you wire a simple one later) inherit the base form styles.

---

### Estimated Effort

* **Time**: M (3–5 focused hours – most of it CSS & iteration)
* **Risk**: Low–Medium

  * Low structural risk (CSS-only).
  * Medium “design coherence” risk (we want consistency with the design system); mitigated by sticking tightly to tokens and component naming patterns.
