# SUM Platform – CSS & Design System Guide

## ARCHIVED

## **Status**: Obsolete

THIS IS NOW OBSOLETE. PLEASE SEE `docs/dev/THEME-GUIDE.md` for up-to-date information.

> **Purpose:**
> One place to understand **how CSS is structured** in `sum_core` and **how to use design tokens** when implementing or updating blocks. This is for both humans and AI agents.

---

## 1. Goals

- **Single source of truth for design values** (tokens).
- **Consistent implementation** across all blocks (hero, services, testimonials, etc.).
- **Brand-driven**: colours and typography are controlled by Wagtail `SiteSettings` via `branding_css` and `branding_fonts`.
- **Modular CSS** that's easy to navigate and extend.

---

## 2. CSS Architecture

All CSS lives under:

`core/sum_core/static/sum_core/css/`

Current structure:

```text
css/
  tokens.css        # Design tokens: colours, type scale, spacing, shadows, easings
  reset.css         # Browser reset and base element styles
  typography.css    # Typography utility classes (.heading-*, .text-*)
  layout.css        # Layout shell, .section, .container, section headers
  utilities.css     # Animation utilities, reveal effects, delays

  components.*.css  # Component-specific styles (flat structure)
    components.buttons.css
    components.cards.css
    components.header.css
    components.hero.css
    components.services.css
    components.testimonials.css
    components.gallery.css
    components.process.css
    components.faq.css
    components.stats.css
    components.trust-strip.css
    components.footer.css
    # ... etc.

  main.css          # Single entrypoint loaded by templates
```

**Key rules**

- Templates **only ever reference** `main.css`.
  `base.html` must continue to link to `sum_core/css/main.css` as the single stylesheet.
- `main.css` is responsible for importing/aggregating the partials in the correct order (tokens → reset → typography → layout → utilities → components).
- Component files **do not** declare new tokens; they only **consume** tokens.

`main.css` imports in this order:

```css
/* 1. DESIGN TOKENS */
@import "tokens.css";

/* 2. RESET & BASE STYLES */
@import "reset.css";
@import "typography.css";

/* 3. LAYOUT SHELL */
@import "layout.css";

/* 4. UTILITY CLASSES */
@import "utilities.css";

/* 5. COMPONENTS */
@import "components.buttons.css";
@import "components.header.css";
@import "components.hero.css";
/* ... all other component files ... */
@import "components.footer.css";
```

---

## 3. Tokens – Single Source of Truth

`tokens.css` is the **only file** that defines raw design values:

- **Typography scale** (`--text-xs`, `--text-sm`, …, `--text-display`), often using `clamp()` for fluid headings.
- **Spacing scale** (`--space-1` … `--space-24`) based on the 8px grid.
- **Colour tokens** (`--color-primary`, `--color-surface`, etc.), usually derived from branding HSL variables generated by `branding_css`.
- **Semantic colors** (`--color-success`, `--color-warning`, `--color-error`, `--color-info`) for status indicators.
- **Radius, shadows, animation easings**, etc.

All other CSS files must **only use tokens** via `var(--...)`:

```css
padding: var(--space-4);
background-color: hsla(var(--surface-tint), 1);
color: hsla(var(--text-main), 1);
box-shadow: var(--shadow-sm);
```

**Absolutely no:**

- New hex colours (`#123456`) in component/layout CSS.
- New font sizes (`18px`, `2.25rem`, etc.) outside the token scale.
- New ad-hoc shadows or radii.

If you need a new value, add a token to `tokens.css` and then reference it.

---

## 4. Typography Roles → Classes

Typography classes live in `typography.css`. Use these instead of setting font properties directly.

> [!IMPORTANT]
> All typography classes listed below **exist** in `core/sum_core/static/sum_core/css/typography.css`. If you need a class that isn't here, check that file first.

### 4.1 Heading Classes

| Role        | Class              | Use For                              |
| ----------- | ------------------ | ------------------------------------ |
| Display     | `.heading-display` | Hero headlines, editorial statements |
| Extra Large | `.heading-xl`      | Large section headings, page titles  |
| Large       | `.heading-lg`      | Standard section headings            |
| Medium      | `.heading-md`      | Card/item titles, sub-headings       |
| Small       | `.heading-sm`      | Minor headings, labels               |

### 4.2 Body Text Classes

| Role        | Class        | Use For                         |
| ----------- | ------------ | ------------------------------- |
| Large Text  | `.text-lg`   | Lead paragraphs, intros         |
| Body        | `.text-body` | Standard body copy              |
| Small       | `.text-sm`   | Secondary info, captions        |
| Extra Small | `.text-xs`   | Meta, timestamps, fine print    |
| Eyebrow     | `.eyebrow`   | Uppercase labels above headings |

### 4.3 Text Modifiers

Combine with heading/body classes:

| Modifier         | Effect                          |
| ---------------- | ------------------------------- |
| `.text-muted`    | Secondary/muted color           |
| `.text-inverted` | Light text for dark backgrounds |
| `.text-accent`   | Accent color highlight          |
| `.text-center`   | Center aligned                  |
| `.text-left`     | Left aligned                    |
| `.text-right`    | Right aligned                   |

### 4.4 Typography Rules

- Every text element must use a typography class
- Component CSS **must not** set `font-family`, `font-size`, `line-height`, or `letter-spacing`
- Fonts come from `branding_fonts` (populates `--font-heading`, `--font-body`)
- Sizes come from the type scale tokens in `tokens.css`

---

## 5. Layout & Grid Patterns

### 5.1 Sections & containers

Every major block (hero, services, testimonials, trust strip, etc.) should follow:

```html
<section class="section [section--muted|section--inset]">
  <div class="container">…</div>
</section>
```

- `.section` controls vertical rhythm.
- `.section--muted` for subtle background emphasis (e.g. grey or tinted band).
- `.section--dark` for dark themed sections with inverted colors.
- `.container` constrains width and centres content.

### 5.2 Section Header Pattern (Shared)

All section blocks share a common header structure defined in `layout.css`. This ensures **consistent styling** for eyebrow labels, headings, and intro text across all sections.

**Classes:**

| Class               | Purpose                                                |
| ------------------- | ------------------------------------------------------ |
| `.section__header`  | Container for the header group (max-width, margin)     |
| `.section__eyebrow` | Pill-style label above heading (e.g. "Selected Works") |
| `.section__heading` | Main section heading with rich text support            |
| `.section__intro`   | Lead paragraph below heading                           |

**Usage in templates:**

```html
<section class="section gallery">
  <div class="container">
    <header class="section__header reveal-group">
      <span class="section__eyebrow">{{ self.eyebrow }}</span>
      <div class="section__heading">{{ self.heading|richtext }}</div>
      <p class="section__intro">{{ self.intro }}</p>
    </header>
    <!-- ... grid content ... -->
  </div>
</section>
```

### 5.3 Grids for card-like blocks

We reuse a standard 1/2/3 grid pattern like the services and testimonials sections:

- **Mobile (<768px):** 1 column
- **Tablet (≥768px):** 2 columns
- **Desktop (≥1024px):** 3 columns

New grids should **copy this pattern** with a namespaced class (e.g. `.trust-strip__grid`, `.faq__grid`).

---

## 6. Component CSS Rules

### 6.1 Where to put styles

- All block-specific CSS goes in `components.<block>.css`:

  - Hero → `components.hero.css`
  - Service cards → `components.services.css`
  - Testimonials → `components.testimonials.css`

- Add a corresponding `@import` entry in `main.css` if there isn't one already.

### 6.2 What you're allowed to write

✅ **Allowed in component CSS**

- Layout properties using tokens:

  ```css
  margin-bottom: var(--space-4);
  padding: var(--space-5);
  gap: var(--space-3);
  ```

- Colours via tokens:

  ```css
  background-color: hsla(var(--surface-tint), 1);
  color: hsla(var(--text-muted), 1);
  border-color: hsla(var(--color-error), 1);
  ```

- Positioning, flex/grid, transforms, transitions, etc.

❌ **Not allowed in component CSS**

- `font-family: "Some Font";` (fonts come from branding).
- `font-size: 32px;` or `1.75rem;` (sizes come from the type scale tokens).
- Raw colour literals: `#123456`, `rgb(…)`, `hsl(…)`.
- Inline styles in templates (`style="..."`).
- `!important` unless absolutely unavoidable and documented.

---

## 7. Agent Workflow for Implementing a Block

**See also:** `.agent/workflows/design-implementation.md` for a detailed step-by-step workflow.

When an agent (human or AI) implements or updates a block:

1. **Identify typography roles** — Assign each text element a role from the typography table
2. **Use the correct class** — Apply the mapped CSS class, don't invent custom sizes
3. **Structure with section/container** — Wrap blocks correctly
4. **Write CSS using tokens only** — No hardcoded values
5. **Run the compliance checklist** — Before considering done

---

## 8. Token Compliance Checklist

Use this list when reviewing PRs or finishing a task.

**Templates**

- [ ] No inline `style="..."` attributes.
- [ ] Section layouts follow `.section` + `.container`.
- [ ] Headings use typography classes or section header classes.
- [ ] Body text uses `.text-body` / `.text-lg`.

**CSS**

- [ ] New styles live in the correct partial (`components.<block>.css`, `layout.css`, etc.).
- [ ] No new raw hex/RGB colours outside `tokens.css`.
- [ ] No `font-family`, `font-size`, `line-height`, or `letter-spacing` in component CSS.
- [ ] All new spacing uses `var(--space-*)` tokens.
- [ ] All new colours use `hsla(var(--*), 1)` format.

**Branding behaviour**

- [ ] Changing fonts/colours in `SiteSettings` still updates the new block (no hard-coded design values blocking it).

---

## 9. Notes for Client Projects & Overrides (Future-facing)

For downstream projects using `sum_core`:

- Prefer to override design by:

  - Adjusting `SiteSettings` colours/fonts.
  - Extending tokens in `tokens.css` via extra CSS loaded after `main.css`.
  - Adding project-specific component CSS files.

- Avoid editing `sum_core` directly; treat this package as a stable core.
